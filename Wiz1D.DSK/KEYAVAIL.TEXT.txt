 .FUNC KEYAVAIL,0 ; NO PARAMETERS   P010010
;
;    SEE IF A KEY WAS PRESSED (BUT DO NOT RETRIEVE IT) AND IS
;    IN THE PASCAL INPUT BUFFER.
;
 PLA       ; PULL RETURN
 STA 00
 PLA
 STA 01
;
 PLA       ; PULL DUMMY SINCE THIS IS A FUNCTION
 PLA
 PLA
 PLA
;
 LDA #00
 PHA
;
 LDA 0C083  ; SELECT RAMCARD RAM READ BANK 2
 JSR 0BF0A  ; CONCK (CHECK KEYBOARD) IN PASCAL SYSCOM AREA
 LDA 0C083  ; SELECT RAMCARD RAM READ BANK 2
            ;
            ; SEE ATTACH.PDF FOR DESCRIPTION OF RPTR AND WPTR 
 LDA #00    ; INIT STATUS TO NO CHARACTER AVAILABLE
 LDX 0BF18  ; RPTR
 CPX 0BF19  ; WPTR
 BEQ L5CA8  ; 0 MEANS NO CHARACTER AVAILABLE FROM CIRCULAR BUFFER
 LDA #01    ; INDICATE A CHARACTER IS IN THE INPUT BUFFER
L5CA8
 PHA        ; RETURN STATUS
 LDA 0C08B  ; SELECT RAMCARD RAM READ BANK 1
;
 LDA 01     ; PUSH RETURN ADDRESS
 PHA
 LDA 00
 PHA
 RTS
 .END
